<!DOCTYPE html>
<html>
    <head>
        <title>Codevelup Resources</title>
        <!-- Site Settings -->
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">

        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css?family=Quicksand|Roboto" rel="stylesheet">  

        <!-- Font Awesome -->
        <link rel="stylesheet" href="fontawesome-free-5.12.1-web/css/all.min.css">   

        <!-- Style -->
        <link rel="stylesheet" type="text/css" href="stylesheet.css">

        
        <!-- Scripts -->
        <script src="papaparse.min.js"></script> 
    </head>

    <body>
        <nav class="navbar">
            <a href="index.html">
                <button class="button button_nav ">
                    CD
                </button>
            </a>
            <a href="resources.html">
                <button class="button button_nav button_active">
                    Resources
                </button>
            </a>
            <a href="guides.html">
                <button class="button button_nav ">
                    Guides
                </button>
            </a>
        </nav>
        
        <section>
            TODO: Create dropdown menus for category, price, and platform. Make CSV Reader and Table Parser. Add Function to delete tables and filter/hide rows.
            <p>
                <!-- TODO: Update SelectCategoryfunction to work for multipl Select groups. Separate out into Tools, Assets and Services, Publishing and Distribution, Learning-->
                Category: 
                <select id="software & tools" onchange="SelectTable(this.value)">
                    <option value="">Tools</option>
                    <option value="2d">2D Art</option>
                    <option value="3d">3D Art</option>
                    <option value="analytics">Analytics</option>
                    <option value="audio">Audio</option>
                    <option value="communication">Communication</option>
                    <option value="engine">Engines and Frameworks</option>
                    <option value="monetization">Monetization</option>
                    <option value="other">Other Tools</option>
                    <option value="sdk">SDKs</option>
                    <option value="security">Security</option>
                    <option value="tasking">Task Management</option>
                    <option value="vcs">Version Control Software</option>
                    <option value="vcsgui">VCS GUI</option>
                    <option value="vcshosts">VCS Hosting</option>
                    <option value="video">Video</option>
                    <option value="writing">Writing</option>
                </select>
                <select id="assets&services" onchange="SelectTable(this.value)">
                    <option value="">Assets & Services</option>
                    <option value="assets">Assets</option>
                    <option value="services">Services</option>
                </select>
                <select id="hardware&peripherals" onchange="SelectTable(this.value)">
                    <option value="">Hardware & Peripherals</option>
                    <option value="hardware">Hardware</option>
                    <option value="peripherals">Peripherals</option>
                </select>
                <select id="publishing&distribution" onchange="SelectTable(this.value)">
                    <option value="">Publishing & Distribution</option>
                    <option value="funding">Funding Options</option>
                    <option value="gamehosts">Hosting & Storefronts</option>
                    <option value="news">News Outlets</option>
                    <option value="publisher">Publishers</option>
                </select>
                <select id="learning&communities" onchange="SelectTable(this.value)">
                    <option value="">Learning & Communities</option>
                    <option value="communities">Communities</option>
                    <option value="conventions">Conventions</option>
                    <option value="jams">Game Jams</option>
                    <option value="learning">Learning Websites</option>
                    <option value="schools">Schools</option>
                </select>
            </p>
            <p>
                Price: 
                <select id="price" onchange="SelectPrice()">
                    <option value="">Price</option>
                    <option value="free">Free</option>
                    <option value="trial">Trial</option>
                    <option value="paid">Paid</option>
                    <option value="subscription">Subscription</option>
                    <option value="royalty">Royalty</option>
                    <option value="license">License</option>
                </select>
            </p>
            <p>
                Platform: 
                <select id="platform" onchange="SelectPlatform()">
                    <option value="">Platform</option>
                    <option value="windows">Windows</option>
                    <option value="mac">Mac</option>
                    <option value="linux">Linux</option>
                    <option value="ios">iOS</option>
                    <option value="android">Android</option>
                </select>
            </p>
        </section>
             
        <div id="showData">
            <!-- Table is added here -->
        </div>

        <!--
        <p id="demo"></p>
        <p id="demo1"></p>
        <p id="demo2"></p>
        <p id="papa"></p>
        -->

    </body>

    <script>
        var filepath;
        var csvdata;

        function SelectTable(filename)
        {
            //filepath = "csv/"+ doc.getElementById("category").value;
            filepath = "csv/"+filename+".csv";
            //document.getElementById("demo").innerHTML = filepath;

            //Clear HTML Data Table
            document.getElementById("showData").innerHTML = "";
            
            //Load CSV Data
            loadDoc(filepath);
        }
        
        function loadDoc(filepath) {
            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    //document.getElementById("papa").innerHTML = this.responseText;
                    csvdata = Papa.parse(this.responseText);
                    //console.log(csvdata);
                    CreateTableFromArray2D(csvdata.data);
                }
            };
            xhttp.open("GET", filepath, true);
            xhttp.send();
        }

        function CreateTableFromArray2D(array2D){
            // CREATE DYNAMIC TABLE.
            var table = document.createElement("table");
            table.setAttribute("id", "myTable");

            // CREATE HTML TABLE HEADER ROW USING THE EXTRACTED HEADERS ABOVE.

            for(var i = 0; i < array2D.length; i++)
            {
                var tr = table.insertRow(-1);                       // TABLE ROW.

                for(var j = 0; j < array2D[i].length; j++)
                {
                    if(i == 0)
                    {
                        if(j==1){continue;}                         // Dont make Table Cell for Links column.
                        var th = document.createElement("th");      // TABLE HEADER.
                        th.innerHTML = array2D[i][j];
                        tr.appendChild(th);
                    }
                    else
                    {
                        if(j==1){continue;}                         // Dont make Table Cell for Links column.
                        var tabCell = tr.insertCell(-1);            // TABLE Cell.
                        if(j==0){   
                            tabCell.innerHTML = "<a href=\"" + array2D[i][j] + "\">"+array2D[i][j]+"</a>";
                            j++;
                        }
                        else{
                            tabCell.innerHTML = array2D[i][j];
                        }
                    }
                }
            }

            // FINALLY ADD THE NEWLY CREATED TABLE WITH JSON DATA TO A CONTAINER.
            var divContainer = document.getElementById("showData");
            divContainer.appendChild(table);
        }
    </script>
</html>
